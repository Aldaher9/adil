<body>
    <div class="container">
        <div id="smartReportSection" class="card" style="margin-top: 20px;">
            <div class="header">
                <h2 style="color: var(--accent);">๐ ุงูุชูุฑูุฑ ุงูููู ุงูุฐูู</h2>
            </div>
            
            <div id="dbUploadArea" style="background:#f8fafc; padding:15px; border-radius:8px; margin-bottom:20px; border:1px dashed var(--accent);">
                <label><b>โ๏ธ ุฅุนุฏุงุฏ ุงููุธุงู:</b> ุงุฑูุน ููู ุงูุนุจุงุฑุงุช ููุฑุฉ ูุงุญุฏุฉ ููุท (ูุชู ุญูุธู ุชููุงุฆูุงู):</label>
                <input type="file" id="jsonFile" accept=".json" onchange="saveDatabaseLocally(event)" style="margin-top:10px;">
                <p id="dbStatus" style="font-size:0.8rem; color: var(--success); margin-top:5px;"></p>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px; margin-bottom:20px;">
                <div>
                    <label>ุงุฎุชูุงุฑ ุงููุนูู:</label>
                    <select id="smartTeacherSelect" style="width:100%; padding:10px; border-radius:5px;">
                        <option value="">-- ุงุฎุชุฑ ูู ุงููุงุฆูุฉ --</option>
                    </select>
                </div>
                <div>
                    <label>ุงููุงุฏุฉ / ุงูุตู:</label>
                    <input type="text" id="smartInfoInput" style="width:100%; padding:10px; border-radius:5px;" placeholder="ูุซุงู: ุฑูุงุถูุงุช - 10/1">
                </div>
            </div>

            <div style="overflow-x: auto;">
                <table id="smartCriteriaTable" style="width:100%; border-collapse: collapse; display:none;">
                    <thead>
                        <tr style="background: var(--primary); color: white;">
                            <th style="padding:10px; text-align:right;">ุงููุนูุงุฑ (ูุตู ุงููุนูุงุฑ)</th>
                            <th style="width:150px;">ุงูุชูุฏูุฑ</th>
                        </tr>
                    </thead>
                    <tbody id="smartTableBody"></tbody>
                </table>
            </div>

            <button class="btn" style="width:100%; margin-top:20px; background:var(--success); color:white; padding:15px; border:none; border-radius:8px; cursor:pointer;" onclick="generateSmartReport()">๐ ุชูููุฏ ุงูุชูุฑูุฑ ุงูููุงุฆู</button>
        </div>

        <div id="smartReportOutput" style="display:none; background:white; padding:30px; margin-top:20px; border:2px solid #333; color: black; text-align: right; direction: rtl;">
            <div id="smartPrintArea"></div>
            <div class="no-print" style="margin-top:20px;">
                <button class="btn" onclick="window.print()" style="background:var(--primary); color:white; padding:10px 20px;">๐จ๏ธ ุทุจุงุนุฉ PDF</button>
                <button class="btn" onclick="document.getElementById('smartReportOutput').style.display='none'" style="background:#64748b; color:white; padding:10px 20px;">ุฅุบูุงู</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="script.js"></script>
</body>
