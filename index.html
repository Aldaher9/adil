<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ù‚Ø§Ø¦Ø¯ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --primary: #1e3a5f; --accent: #e67e22; --danger: #e74c3c; 
            --success: #25d366; --bg: #f4f7f6;
            --btn-grad: linear-gradient(135deg, #1e3a5f 0%, #2c3e50 100%);
        }
        * { font-family: 'Tajawal', sans-serif !important; box-sizing: border-box; }
        body { background: var(--bg); margin: 0; padding: 10px; color: #333; }
        
        .header { 
            background: var(--primary); color: white; padding: 15px; 
            border-radius: 12px; display: flex; justify-content: space-between; 
            align-items: center; margin-bottom: 10px;
        }

        .search-box {
            width: 100%; padding: 12px; border: 2px solid #ddd;
            border-radius: 10px; margin-bottom: 10px; font-size: 16px;
        }

        .teacher-card {
            background: white; border-radius: 12px; padding: 15px;
            margin-bottom: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border-right: 5px solid var(--primary);
        }

        .teacher-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .teacher-name { font-weight: 700; font-size: 1.1rem; color: var(--primary); }
        
        .quick-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        
        .action-btn {
            border: none; padding: 10px 5px; border-radius: 8px; color: white;
            font-size: 13px; font-weight: bold; cursor: pointer; text-decoration: none;
            text-align: center; display: flex; align-items: center; justify-content: center;
        }
        
        .btn-office { background: #3498db; } /* Ø·Ù„Ø¨ Ù„Ù„Ù…ÙƒØªØ¨ */
        .btn-duty { background: #f39c12; }   /* Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© */
        .btn-lineup { background: #9b59b6; } /* Ø§Ù„Ø·Ø§Ø¨ÙˆØ± Ø§Ù„ØµØ¨Ø§Ø­ÙŠ */
        .btn-edit { background: #95a5a6; }   /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ù‚Ù… */

        #editModal { display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); }
        .modal-content { background: white; margin: 20% auto; padding: 20px; border-radius: 15px; width: 90%; max-width: 350px; text-align: center; }
        
        .phone-input { width: 100%; padding: 12px; margin: 15px 0; border: 1px solid #ddd; border-radius: 8px; font-size: 18px; text-align: center; }
    </style>
</head>
<body>

<div class="header">
    <h2 style="margin:0;">ğŸ—‚ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆØ§ØµÙ„</h2>
    <span id="teacherCount" style="background:rgba(255,255,255,0.2); padding:4px 10px; border-radius:20px; font-size:14px;">0 Ù…Ø¹Ù„Ù…</span>
</div>

<input type="text" id="searchInput" class="search-box" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…..." onkeyup="filterTeachers()">

<div id="teachersList">
    </div>

<div id="editModal">
    <div class="modal-content">
        <h3 id="editName">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ù‚Ù…</h3>
        <input type="tel" id="newPhone" class="phone-input" placeholder="968XXXXXXXX">
        <div style="display:flex; gap:10px;">
            <button onclick="savePhone()" style="flex:1; padding:12px; background:var(--success); color:white; border:none; border-radius:8px; font-weight:bold;">Ø­ÙØ¸</button>
            <button onclick="closeModal()" style="flex:1; padding:12px; background:#ccc; border:none; border-radius:8px;">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>
</div>

<script>
// Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
let phones = JSON.parse(localStorage.getItem('teacherPhones')) || {
    "Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ": "96892959789", "Ø£Ø­Ù…Ø¯ Ø¹Ø¨Ø¯Ø§Ù„ÙˆÙ‡Ø§Ø¨": "96890128035", "Ø£Ø­Ù…Ø¯ Ø¹ÙŠØ³Ù‰ Ø¬Ù…Ø¹Ù‡ Ø§Ù„Ø¨ÙˆØµØ§ÙÙŠ": "96892876386",
    "Ø§Ø­Ù…Ø¯ Ø³Ø§Ù„Ù… Ù…Ø­Ù…Ø¯ Ø§Ù„ØºÙ…Ø§Ø±Ù‰": "96895500478", "Ø§Ø­Ù…Ø¯ Ø¹Ø¨Ø¯Ø§Ù„ØªÙˆØ§Ø¨": "96876609518", "Ø§Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¬Ù…Ø¹Ù‡ Ø§Ù„Ø¨ÙˆØµØ§ÙÙ‰": "96892923979"
};

let currentEditingTeacher = "";

function renderTeachers() {
    const list = document.getElementById('teachersList');
    const sortedNames = Object.keys(phones).sort();
    document.getElementById('teacherCount').innerText = sortedNames.length + " Ù…Ø¹Ù„Ù…";
    
    list.innerHTML = sortedNames.map(name => {
        const phone = phones[name];
        // Ù†ØµÙˆØµ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©
        const msgOffice = encodeURIComponent(`Ø§Ù„Ø£Ø³ØªØ§Ø°/ ${name}\nÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙƒØ±Ù… Ø¨Ø§Ù„Ø­Ø¶ÙˆØ± Ù„Ù„Ù…ÙƒØªØ¨ Ø§Ù„Ø¢Ù† Ù„Ø£Ù…Ø± Ù‡Ø§Ù… Ø¨Ø§Ø±Ùƒ Ø§Ù„Ù„Ù‡ ÙÙŠÙƒ.`);
        const msgDuty = encodeURIComponent(`Ø§Ù„Ø£Ø³ØªØ§Ø°/ ${name}\nÙ†Ù„Ø§Ø­Ø¸ Ø¹Ø¯Ù… ØªÙˆØ§Ø¬Ø¯ÙƒÙ… ÙÙŠ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø© Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒÙ…ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ¬Ù‡ Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ø£Ù‡Ù…ÙŠØ©.`);
        const msgLineup = encodeURIComponent(`Ø§Ù„Ø£Ø³ØªØ§Ø°/ ${name}\nÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„ØªÙˆØ§Ø¬Ø¯ Ù…Ø¹ ØµÙÙƒÙ… ÙÙŠ Ø§Ù„Ø·Ø§Ø¨ÙˆØ± Ø§Ù„ØµØ¨Ø§Ø­ÙŠØŒ Ø´Ø§ÙƒØ±ÙŠÙ† ØªØ¹Ø§ÙˆÙ†ÙƒÙ….`);

        return `
        <div class="teacher-card">
            <div class="teacher-info">
                <div class="teacher-name">${name}</div>
                <button class="action-btn btn-edit" onclick="openEdit('${name}', '${phone}')">âš™ï¸</button>
            </div>
            <div class="quick-actions">
                <a href="https://wa.me/${phone}?text=${msgOffice}" target="_blank" class="action-btn btn-office">ğŸ¢ Ø·Ù„Ø¨ Ù„Ù„Ù…ÙƒØªØ¨</a>
                <a href="https://wa.me/${phone}?text=${msgDuty}" target="_blank" class="action-btn btn-duty">ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø©</a>
                <a href="https://wa.me/${phone}?text=${msgLineup}" target="_blank" class="action-btn btn-lineup">ğŸ“¢ Ø§Ù„Ø·Ø§Ø¨ÙˆØ±</a>
                <a href="tel:${phone}" class="action-btn" style="background:#2ecc71;">ğŸ“ Ø§ØªØµØ§Ù„ Ù…Ø¨Ø§Ø´Ø±</a>
            </div>
        </div>`;
    }).join('');
}

function filterTeachers() {
    const query = document.getElementById('searchInput').value.toLowerCase();
    const cards = document.querySelectorAll('.teacher-card');
    cards.forEach(card => {
        const name = card.querySelector('.teacher-name').innerText.toLowerCase();
        card.style.display = name.includes(query) ? 'block' : 'none';
    });
}

function openEdit(name, phone) {
    currentEditingTeacher = name;
    document.getElementById('editName').innerText = name;
    document.getElementById('newPhone').value = phone;
    document.getElementById('editModal').style.display = 'block';
}

function closeModal() { document.getElementById('editModal').style.display = 'none'; }

function savePhone() {
    const val = document.getElementById('newPhone').value.trim();
    if(val) {
        phones[currentEditingTeacher] = val;
        localStorage.setItem('teacherPhones', JSON.stringify(phones));
        closeModal();
        renderTeachers();
    }
}

window.onload = renderTeachers;
</script>
</body>
</html>
